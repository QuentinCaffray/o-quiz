# Dictionnaire de donn√©es

Objectif : **brouillon du MPD** avant impl√©mentation r√©elle pour : 
- pr√©ciser les types
- pr√©ciser les √©ventuelles contraintes
- exemplifier, clarifier les donn√©es manipul√©es

A ce stade, on choisi un SGBDR -> choisir les types correspondant

Plusieurs fa√ßon de le r√©aliser, en particulier, un tableau fait l'affaire

Ici, pour Oquiz, on choisit `PostgreSQL`

## Pour toutes les tables 

- `GENERATED` = `GENERATED BY DEFAULT AS IDENTITY`
- `created_at` pour toutes les tables (`TIMESTAMPTZ` avec par d√©faut l'heure d'insertion de l'instant)
- `updated_at` pour toutes les tables (`TIMESTAMPTZ` avec par d√©faut l'heure d'insertion de l'instant)

## Table `user`

| Nom du champs | Type       | UNIQUE | NON NULL | PK  | FK  | Exemple            | Par d√©faut          | Description du champs               |
| ------------- | ---------- | ------ | -------- | --- | --- | ------------------ | ------------------- | ----------------------------------- |
| `id`          | `INTEGER`  | ‚úÖ     | ‚úÖ       | ‚úÖ  |     | 1                  | `GENERATED`         | L'identifiant de l'utilisateur      |
| `firstname`   | `TEXT`     | ‚ùå     | ‚úÖ       | ‚ùå  |     | "Alice"            |                     | Pr√©nom de l'utilisateur             |
| `lastname`    | `TEXT`     | ‚ùå     | ‚úÖ       | ‚ùå  |     | "Durand"           |                     | Nom de l'utilisateur                |
| `email`       | `TEXT`     | ‚úÖ     | ‚úÖ       | ‚ùå  |     | "alice@oclock.io"  |                     | Email de l'utilisateur              |
| `password`    | `TEXT`     | ‚ùå     | ‚úÖ       | ‚ùå  |     | "$2a$10$..."       |                     | Mot de passe hach√© de l'utilisateur |
| `role`        | `ENUM`     | ‚ùå     | ‚úÖ       | ‚ùå  |     | "admin"            | "member"            | Role de l'utilisateur               |


- `ENUM` = 'member' | 'autor' | 'admin'


## üß© Table `quiz`

| Nom du champ   | Type       | UNIQUE | NON NULL | PK  | FK         | Exemple               | Par d√©faut  | Description du champ        |
| -------------- | ---------- | ------ | -------- | --- | ---------- | --------------------- | ----------- | --------------------------- |
| `id`           | `INTEGER`  | ‚úÖ     | ‚úÖ       | ‚úÖ  |            | 1                     | `GENERATED` | Identifiant unique du quiz  |
| `title`        | `TEXT`     | ‚ùå     | ‚úÖ       | ‚ùå  |            | "Quiz JavaScript"     |             | Titre du quiz               |
| `description`  | `TEXT`     | ‚ùå     | ‚ùå       | ‚ùå  |            | "Testez vos bases JS" |             | Description du quiz         |
| `published_at` | `DATETIME` | ‚ùå     | ‚ùå       | ‚ùå  |            | "2025-02-20 10:00"    |             | Date de publication du quiz |
| `author_id`    | `INTEGER`  | ‚ùå     | ‚úÖ       | ‚ùå  | ‚úÖ user.id | 1                     |             | Auteur du quiz              |



## üß© Table `question`

| Nom du champ  | Type      | UNIQUE | NON NULL | PK  | FK  | Exemple                           | Par d√©faut  | Description du champ              |
| ------------- | --------- | ------ | -------- | --- | --- | --------------------------------- | ----------- | --------------------------------- |
| `id`          | `INTEGER` | ‚úÖ     | ‚úÖ       | ‚úÖ  |     | 10                                | `GENERATED` | Identifiant unique de la question |
| `description` | `TEXT`    | ‚ùå     | ‚úÖ       | ‚ùå  |     | "Comment d√©clarer une variable ?" |             | Texte de la question              |
| `anecdote`    | `TEXT`    | ‚ùå     | ‚ùå       | ‚ùå  |     | "JS est n√© en 10 jours !"         |             | Anecdote li√©e √† la question       |
| `wiki_link`   | `TEXT`    | ‚ùå     | ‚ùå       | ‚ùå  |     | "wikipedia.org/wiki/JavaScript"   |             | Lien d‚Äôinformation compl√©mentaire |
| `quiz_id`     | `INTEGER` | ‚ùå     | ‚úÖ       | ‚ùå  | ‚úÖ  | quiz.id                           |             | R√©f√©rence √† `quiz.id`             |
| `level_id`    | `INTEGER` | ‚ùå     | ‚úÖ       | ‚ùå  | ‚úÖ  | level.id                          |             | R√©f√©rence √† `level.id`            |


## üß© Table `choice`

| Nom du champ  | Type      | UNIQUE | NON NULL | PK  | FK  | Exemple | Par d√©faut  | Description du champ               |
| ------------- | --------- | ------ | -------- | --- | --- | ------- | ----------- | ---------------------------------- |
| `id`          | `INTEGER` | ‚úÖ     | ‚úÖ       | ‚úÖ  |     | 50      | `GENERATED` | Identifiant unique du choix        |
| `description` | `TEXT`    | ‚ùå     | ‚úÖ       | ‚ùå  |     | `"let"` |             | Proposition de r√©ponse             |
| `is_valid`    | `BOOLEAN` | ‚ùå     | ‚úÖ       | ‚ùå  |     | `true`  | `false`     | Indique si la r√©ponse est correcte |
| `question_id` | `INTEGER` | ‚ùå     | ‚úÖ       | ‚ùå  | ‚úÖ  | 10      |             | R√©f√©rence √† `question.id`          |


## üß© Table `tag`

| Nom du champ | Type      | UNIQUE | NON NULL | PK  | FK  | Exemple      | Par d√©faut  | Description du champ                 |
| ------------ | --------- | ------ | -------- | --- | --- | ------------ | ----------- | ------------------------------------ |
| `id`         | `INTEGER` | ‚úÖ     | ‚úÖ       | ‚úÖ  |     | 1            | `GENERATED` | Identifiant unique du tag            |
| `name`        | `TEXT`    | ‚úÖ     | ‚úÖ       | ‚ùå  |     | "JavaScript" |             | Nom du tag                           |
| `parent_id`  | `INTEGER` | ‚ùå     | ‚ùå       | ‚ùå  | ‚úÖ  | 5            |             | R√©f√©rence √† un tag parent (`tag.id`) |


## üß© Table `level`

| Nom du champ | Type      | UNIQUE | NON NULL | PK | FK | Exemple    | Par d√©faut  | Description du champ        |
| ------------ | --------- | ------ | -------- | -- | -- | ---------- | ----------- | --------------------------- |
| `id`         | `INTEGER` | ‚úÖ      | ‚úÖ        | ‚úÖ  |    | 1          | `GENERATED` | Identifiant du niveau       |
| `name`        | `TEXT`    | ‚úÖ      | ‚úÖ        | ‚ùå  |    | "D√©butant" |             | Nom du niveau de difficult√© |


## üß© Table `quiz_has_tag`

| Nom du champ | Type      | UNIQUE | NON NULL | PK | FK | Exemple | Par d√©faut | Description du champ  |
| ------------ | --------- | ------ | -------- | -- | -- | ------- | ---------- | --------------------- |
| `quiz_id`    | `INTEGER` | ‚ùå      | ‚úÖ        | ‚úÖ  | ‚úÖ  | 1       |            | R√©f√©rence √† `quiz.id` |
| `tag_id`     | `INTEGER` | ‚ùå      | ‚úÖ        | ‚úÖ  | ‚úÖ  | 3       |            | R√©f√©rence √† `tag.id`  |


## üß© Table `attempt`

| Nom du champ | Type       | UNIQUE | NON NULL | PK | FK | Exemple            | Par d√©faut          | Description du champ           |
| ------------ | ---------- | ------ | -------- | -- | -- | ------------------ | ------------------- | ------------------------------ |
| `id`         | `INTEGER`  | ‚úÖ      | ‚úÖ        | ‚úÖ  |    | 100                | `GENERATED`         | Identifiant de la tentative    |
| `user_id`    | `INTEGER`  | ‚ùå      | ‚úÖ        | ‚ùå  | ‚úÖ  | 1                  |                     | R√©f√©rence √† `user.id`          |
| `quiz_id`    | `INTEGER`  | ‚ùå      | ‚úÖ        | ‚ùå  | ‚úÖ  | 5                  |                     | R√©f√©rence √† `quiz.id`          |
| `score_max`  | `INTEGER`  | ‚ùå      | ‚úÖ        | ‚ùå  |    | 10                 |                     | Score maximum possible du quiz |
| `score`      | `INTEGER`  | ‚ùå      | ‚úÖ        | ‚ùå  |    | 7                  |                     | Score obtenu par l‚Äôutilisateur |
| `date`       | `DATETIME` | ‚ùå      | ‚úÖ        | ‚ùå  |    | "2025-02-18 09:45" | `CURRENT_TIMESTAMP` | Date de la tentative           |

